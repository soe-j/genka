#!/usr/bin/env bash
#
# Usage: genka create [project|stage|member] [name]
# Summary: genka で使う project, stage, member を作成する
# Help: genka で使う project, stage, member を作成する
#
# - project [project_name]
#   利用するプロジェクトを作成する
#
# - genka stage [stage_name]
#   利用する工程を作成する
#
# - genka member [member_name]
#   利用する作業者を作成する
#

set -e

create () {
  curl -X POST -d "name=$2" "localhost:3000/$1s/"
}

case $1 in
  project | stage | member )
    if [ -n "$2" ]
    then
      create $1 $2
    else
      genka help create
      exit 2
    fi
    ;;
  * )
    genka help create
    exit 1
    ;;
esac
